"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[145],{1390:function(e,l,t){t.d(l,{Z:function(){return h}});var a=t(3396),s=t(7139);const r={class:"row progress-div",style:{transform:"translate(2%, 0)"}},o={class:"d-flex justify-content-center fs-2 text-black-50 progress-ul"},i=(0,a._)("i",{class:"bi bi-arrow-right px-3"},null,-1),n=(0,a._)("i",{class:"bi bi-arrow-right px-3"},null,-1);function c(e,l,t,c,d,u){return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("ul",o,[(0,a._)("li",{class:(0,s.C_)({progressActive:"/user/cart"===d.path})},"購物車",2),i,(0,a._)("li",{class:(0,s.C_)({progressActive:"/user/sendorder"===d.path})},"準備結賬",2),n,(0,a._)("li",{class:(0,s.C_)({progressActive:d.path==`/user/checkout/${t.orderId}`})}," 訂單完成 ",2)])])}var d={props:["orderId"],data(){return{path:"",isTrue:!1}},method:{},created(){this.path=this.$route.path,console.log(this.path)}},u=t(89);const m=(0,u.Z)(d,[["render",c]]);var h=m},4145:function(e,l,t){t.r(l),t.d(l,{default:function(){return P}});var a=t(3396),s=t(7139),r=t(9242);const o={class:"container"},i={class:"row justify-content-center d-flex mt-4"},n={class:"col-6"},c={class:"w-100"},d=(0,a._)("h4",null,"帳單資訊",-1),u=(0,a._)("hr",null,null,-1),m={class:"mb-3"},h=(0,a._)("label",{for:"email",class:"form-label"},"Email",-1),_={class:"mb-3"},p=(0,a._)("label",{for:"name",class:"form-label"},"收件人姓名",-1),f={class:"mb-3"},g=(0,a._)("label",{for:"tel",class:"form-label"},"收件人電話",-1),b={class:"mb-3"},v=(0,a._)("label",{for:"address",class:"form-label"},"收件人地址",-1),w={class:"mb-3"},y=(0,a._)("label",{for:"message",class:"form-label"},"留言",-1),k={class:"col-6"},x=(0,a._)("h4",null,"您的訂單",-1),C=(0,a._)("hr",null,null,-1),V={class:"w-100"},W={class:"table align-middle"},$=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"商品"),(0,a._)("th",{class:"text-end"},"價格")])],-1),D={class:"text-black-50",style:{"font-size":"0.75rem"}},z={key:0,class:"text-end"},T={key:1,class:"text-end"},j=(0,a._)("td",null,"小計",-1),I={key:0,class:"text-end"},L={key:1,class:"text-end"},N=(0,a._)("tr",null,[(0,a._)("td",null,"運費"),(0,a._)("td",{class:"text-end"},[(0,a._)("del",{class:"text-black-50"},"NT. 60")])],-1),q=(0,a._)("td",null,"總計",-1),U={key:0,class:"text-end"},M={key:1,class:"text-end"},Z={class:"mt-2 text-end"};function A(e,l,t,A,E,O){const F=(0,a.up)("Loading"),H=(0,a.up)("Progress"),P=(0,a.up)("Field"),S=(0,a.up)("ErrorMessage"),Y=(0,a.up)("Form");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(F,{active:E.isLoading},null,8,["active"]),(0,a._)("div",o,[(0,a.Wm)(H),(0,a._)("div",i,[(0,a._)("div",n,[(0,a._)("div",c,[d,u,(0,a.Wm)(Y,null,{default:(0,a.w5)((({errors:e})=>[(0,a._)("div",m,[h,(0,a.Wm)(P,{id:"email",name:"email",type:"email",class:(0,s.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:E.form.user.email,"onUpdate:modelValue":l[0]||(l[0]=e=>E.form.user.email=e)},null,8,["class","modelValue"]),(0,a.Wm)(S,{name:"email",class:"invalid-feedback"})]),(0,a._)("div",_,[p,(0,a.Wm)(P,{id:"name",name:"姓名",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:E.form.user.name,"onUpdate:modelValue":l[1]||(l[1]=e=>E.form.user.name=e)},null,8,["class","modelValue"]),(0,a.Wm)(S,{name:"姓名",class:"invalid-feedback"})]),(0,a._)("div",f,[g,(0,a.Wm)(P,{id:"tel",name:"電話",type:"tel",class:(0,s.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:E.form.user.tel,"onUpdate:modelValue":l[2]||(l[2]=e=>E.form.user.tel=e)},null,8,["class","modelValue"]),(0,a.Wm)(S,{name:"電話",class:"invalid-feedback"})]),(0,a._)("div",b,[v,(0,a.Wm)(P,{id:"address",name:"地址",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:E.form.user.address,"onUpdate:modelValue":l[3]||(l[3]=e=>E.form.user.address=e)},null,8,["class","modelValue"]),(0,a.Wm)(S,{name:"地址",class:"invalid-feedback"})]),(0,a._)("div",w,[y,(0,a.wy)((0,a._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":l[4]||(l[4]=e=>E.form.message=e)},null,512),[[r.nr,E.form.message]])])])),_:1})])]),(0,a._)("div",k,[x,C,(0,a._)("div",V,[(0,a._)("table",W,[$,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(E.cart.carts,(l=>((0,a.wg)(),(0,a.iD)("tr",null,[(0,a._)("td",D,(0,s.zw)(l.product.title)+" x "+(0,s.zw)(l.qty),1),l.total<1e3?((0,a.wg)(),(0,a.iD)("td",z," NT. "+(0,s.zw)(l.total),1)):((0,a.wg)(),(0,a.iD)("td",T," NT. "+(0,s.zw)(e.$filters.currency(l.total)),1))])))),256)),(0,a._)("tr",null,[j,(E.cart.total=E.cart.final_total)?((0,a.wg)(),(0,a.iD)("td",I," NT. "+(0,s.zw)(e.$filters.currency(E.cart.total)),1)):((0,a.wg)(),(0,a.iD)("td",L," NT. "+(0,s.zw)(e.$filters.currency(E.cart.final_total)),1))]),N,(0,a._)("tr",null,[q,(E.cart.total=E.cart.final_total)?((0,a.wg)(),(0,a.iD)("td",U," NT. "+(0,s.zw)(e.$filters.currency(E.cart.total)),1)):((0,a.wg)(),(0,a.iD)("td",M," NT. "+(0,s.zw)(e.$filters.currency(E.cart.final_total)),1))])])]),(0,a._)("div",Z,[(0,a._)("button",{type:"button",class:"btn btn-outline-dark btn-lg",onClick:l[5]||(l[5]=(...e)=>O.back&&O.back(...e))}," 返回購物車 "),(0,a._)("button",{type:"submit",class:"btn btn-outline-danger ms-2 btn-lg",onClick:l[6]||(l[6]=(0,r.iM)(((...e)=>O.createOrder&&O.createOrder(...e)),["prevent"]))}," 下單購買 ")])])])])])],64)}t(560);var E=t(1390),O={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1,cart:[],orderId:""}},components:{Progress:E.Z},inject:["httpMessageState"],methods:{getCart(){const e="https://vue3-course-api.hexschool.io/api/jaydan-api/cart";this.isLoading=!0,this.$http.get(e).then((e=>{console.log(e),this.cart=e.data.data,this.isLoading=!1,console.log(this.cart)}))},createOrder(){const e="https://vue3-course-api.hexschool.io/api/jaydan-api/order",l=this.form;this.isLoading=!0,this.axios.post(e,{data:l}).then((e=>{this.isLoading=!1,this.httpMessageState(e,"提交表單"),console.log(e),this.orderId=e.data.orderId,console.log(this.orderId),this.getCart(),this.$router.push(`/user/checkout/${this.orderId}`)}))},back(){this.$router.push("/user/cart")}},created(){this.getCart()}},F=t(89);const H=(0,F.Z)(O,[["render",A]]);var P=H}}]);
//# sourceMappingURL=145.989e7a6f.js.map