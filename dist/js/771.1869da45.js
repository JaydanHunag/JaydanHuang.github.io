"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[771],{1390:function(t,s,a){a.d(s,{Z:function(){return h}});var e=a(3396),l=a(7139);const o={class:"row progress-div",style:{transform:"translate(2%, 0)"}},n={class:"d-flex justify-content-center fs-2 text-black-50 progress-ul"},i=(0,e._)("i",{class:"bi bi-arrow-right px-3"},null,-1),r=(0,e._)("i",{class:"bi bi-arrow-right px-3"},null,-1);function c(t,s,a,c,d,u){return(0,e.wg)(),(0,e.iD)("div",o,[(0,e._)("ul",n,[(0,e._)("li",{class:(0,l.C_)({progressActive:"/user/cart"===d.path})},"購物車",2),i,(0,e._)("li",{class:(0,l.C_)({progressActive:"/user/sendorder"===d.path})},"準備結賬",2),r,(0,e._)("li",{class:(0,l.C_)({progressActive:d.path==`/user/checkout/${a.orderId}`})}," 訂單完成 ",2)])])}var d={props:["orderId"],data(){return{path:"",isTrue:!1}},method:{},created(){this.path=this.$route.path,console.log(this.path)}},u=a(89);const p=(0,u.Z)(d,[["render",c]]);var h=p},2771:function(t,s,a){a.r(s),a.d(s,{default:function(){return G}});var e=a(3396),l=a(7139),o=a(9242);const n=t=>((0,e.dD)("data-v-777434ca"),t=t(),(0,e.Cn)(),t),i={class:"container"},r={class:"row mt-6"},c={class:"col-6"},d={class:"sticky-top"},u={class:"table align-middle"},p=n((()=>(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th"),(0,e._)("th",null,"品名"),(0,e._)("th",{class:"cart-input"},"數量"),(0,e._)("th",null,"單價")])],-1))),h=["onClick"],_=n((()=>(0,e._)("i",{class:"bi bi-x"},null,-1))),g=[_],b=["src"],y={key:0,class:"text-success"},v={class:"input-group input-group-sm"},m=["onUpdate:modelValue","onChange","disabled"],k={class:"input-group-text"},w={class:"text-end"},x={key:0,class:"text-success"},f=n((()=>(0,e._)("td",{colspan:"3",class:"text-end"},"總計",-1))),C={class:"text-end"},$={key:0},D=n((()=>(0,e._)("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1))),I={class:"text-end text-success"},L={class:"h-100 border-start border-4 col-6"},j={class:"table align-middle"},q=n((()=>(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th",null,"購物車總計"),(0,e._)("td"),(0,e._)("td")])],-1))),z=n((()=>(0,e._)("td",null,"小計",-1))),T={key:0,class:"text-end"},U={key:1,class:"text-end"},A=n((()=>(0,e._)("tr",null,[(0,e._)("td",null,"運費"),(0,e._)("td",{class:"text-end"},[(0,e._)("del",{class:"text-black-50"},"NT. 60")])],-1))),N=n((()=>(0,e._)("td",null,"總計",-1))),S={key:0,class:"text-end"},Z={key:1,class:"text-end"},M={class:"mb-5"},O={class:"table align-middle"},P=n((()=>(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th",null,[(0,e._)("i",{class:"bi bi-ticket-perforated-fill pe-2"}),(0,e.Uk)("折價券")])])],-1))),V={class:"input-group input-group-sm mt-3 w-100",style:{height:"10vh"}},H={class:"input-group-append"},W=n((()=>(0,e._)("div",{class:"py-5"},[(0,e._)("div")],-1)));function Y(t,s,a,n,_,Y){const F=(0,e.up)("Loading"),K=(0,e.up)("Progress");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(F,{active:t.isLoading},null,8,["active"]),(0,e._)("body",null,[(0,e._)("div",i,[(0,e.Wm)(K),(0,e._)("div",r,[(0,e._)("div",c,[(0,e._)("div",d,[(0,e._)("table",u,[p,(0,e._)("tbody",null,[_.cart.carts?((0,e.wg)(!0),(0,e.iD)(e.HY,{key:0},(0,e.Ko)(_.cart.carts,(s=>((0,e.wg)(),(0,e.iD)("tr",{key:s.id},[(0,e._)("td",null,[(0,e._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t=>Y.removeCartItem(s.id)},g,8,h)]),(0,e._)("td",null,[(0,e._)("img",{src:s.product.imageUrl,alt:"item",class:"cart-img pe-1"},null,8,b),(0,e.Uk)(" "+(0,l.zw)(s.product.title)+" ",1),s.coupon?((0,e.wg)(),(0,e.iD)("div",y," 已套用優惠券 ")):(0,e.kq)("",!0)]),(0,e._)("td",null,[(0,e._)("div",v,[(0,e.wy)((0,e._)("input",{type:"number",class:"form-control","onUpdate:modelValue":t=>s.qty=t,min:"1",onChange:t=>Y.updateCart(s),disabled:s.product_id===_.status.loadingItem},null,40,m),[[o.nr,s.qty,void 0,{number:!0}]]),(0,e._)("div",k," / "+(0,l.zw)(s.product.unit),1)])]),(0,e._)("td",w,[_.cart.final_total!==_.cart.total?((0,e.wg)(),(0,e.iD)("small",x,"折扣價：")):(0,e.kq)("",!0),(0,e.Uk)(" "+(0,l.zw)(t.$filters.currency(s.final_total)),1)])])))),128)):(0,e.kq)("",!0)]),(0,e._)("tfoot",null,[(0,e._)("tr",null,[f,(0,e._)("td",C,(0,l.zw)(t.$filters.currency(_.cart.total)),1)]),_.cart.final_total!==_.cart.total?((0,e.wg)(),(0,e.iD)("tr",$,[D,(0,e._)("td",I,(0,l.zw)(t.$filters.currency(_.cart.final_total)),1)])):(0,e.kq)("",!0)])]),(0,e._)("div",null,[(0,e._)("button",{class:"btn btn-outline-danger w-100 my-1",onClick:s[0]||(s[0]=(...t)=>Y.delAll&&Y.delAll(...t))}," 全部清除 "),(0,e._)("button",{class:"btn btn-outline-dark my-1 w-100",onClick:s[1]||(s[1]=(...t)=>Y.back&&Y.back(...t))}," 繼續購物 ")])])]),(0,e._)("div",L,[(0,e._)("table",j,[q,(0,e._)("tbody",null,[(0,e._)("tr",null,[z,(_.cart.total=_.cart.final_total)?((0,e.wg)(),(0,e.iD)("td",T," NT. "+(0,l.zw)(t.$filters.currency(_.cart.total)),1)):((0,e.wg)(),(0,e.iD)("td",U," NT. "+(0,l.zw)(t.$filters.currency(_.cart.final_total)),1))]),A,(0,e._)("tr",null,[N,(_.cart.total=_.cart.final_total)?((0,e.wg)(),(0,e.iD)("td",S," NT. "+(0,l.zw)(t.$filters.currency(_.cart.total)),1)):((0,e.wg)(),(0,e.iD)("td",Z," NT. "+(0,l.zw)(t.$filters.currency(_.cart.final_total)),1))])])]),(0,e._)("div",M,[(0,e.wy)((0,e._)("button",{class:"btn btn-outline-danger w-100",onClick:s[2]||(s[2]=(0,o.iM)(((...t)=>Y.toSendOrder&&Y.toSendOrder(...t)),["prevent"]))}," 前往結賬 ",512),[[o.F8,0!=_.cart.total]])]),(0,e._)("table",O,[P,(0,e._)("tr",null,[(0,e._)("td",null,[(0,e._)("div",V,[(0,e.wy)((0,e._)("input",{type:"text",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=t=>_.coupon_code=t),placeholder:"請輸入優惠碼",style:{height:"50px"}},null,512),[[o.nr,_.coupon_code]])])])]),(0,e._)("div",H,[(0,e._)("button",{class:"btn btn-outline-secondary w-100",type:"button",onClick:s[4]||(s[4]=(...t)=>Y.addCouponCode&&Y.addCouponCode(...t))}," 套用優惠碼 ")])])])])]),W])],64)}a(560);var F=a(1390),K={data(){return{products:[],product:{},status:{loadingItem:""},cart:{},coupon_code:""}},inject:["httpMessageState"],components:{Progress:F.Z},methods:{getProduct(t){this.$router.push(`/user/product/${t}`)},addCart(t){const s="https://vue3-course-api.hexschool.io/api/jaydan-api/cart";this.status.loadingItem=t;const a={product_id:t,qty:1};this.axios.post(s,{data:a}).then((t=>{this.status.loadingItem="",console.log(t),this.getCart()}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/jaydan-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{console.log(t),this.cart=t.data.data,this.isLoading=!1}))},updateCart(t){const s=`https://vue3-course-api.hexschool.io/api/jaydan-api/cart/${t.id}`;this.isLoading=!0;const a={product_id:t.product_id,qty:t.qty};this.status.loadingItem=t.id,this.axios.put(s,{data:a}).then((t=>{console.log(t),this.getCart(),this.status.loadingItem=""}))},addCouponCode(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/jaydan-api/coupon ",s={code:this.coupon_code};this.axios.post(t,{data:s}).then((t=>{this.isLoading=!1,console.log(t),this.getCart()}))},removeCartItem(t){this.isLoading=!0;const s=`https://vue3-course-api.hexschool.io/api/jaydan-api/cart/${t}`;this.axios.delete(s).then((t=>{console.log(t),this.isLoading=!1,this.getCart()}))},delAll(){const t="https://vue3-course-api.hexschool.io/api/jaydan-api/carts";this.isLoading=!0,this.axios.delete(t).then((t=>{this.isLoading=!1,this.httpMessageState(t,"購物車清除"),this.getCart()}))},back(){this.$router.push("/user/productlist"),scrollTo(0,0)},toSendOrder(){this.$router.push("/user/sendorder")}},created(){this.getCart()}},B=a(89);const E=(0,B.Z)(K,[["render",Y],["__scopeId","data-v-777434ca"]]);var G=E}}]);
//# sourceMappingURL=771.1869da45.js.map