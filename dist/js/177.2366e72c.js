"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[177],{1390:function(t,s,e){e.d(s,{Z:function(){return h}});var a=e(3396),l=e(7139);const o={class:"row progress-div",style:{transform:"translate(2%, 0)"}},n={class:"d-flex justify-content-center fs-2 text-black-50 progress-ul"},i=(0,a._)("i",{class:"bi bi-arrow-right px-3"},null,-1),r=(0,a._)("i",{class:"bi bi-arrow-right px-3"},null,-1);function c(t,s,e,c,d,u){return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("ul",n,[(0,a._)("li",{class:(0,l.C_)({progressActive:"/user/cart"===d.path})},"購物車",2),i,(0,a._)("li",{class:(0,l.C_)({progressActive:"/user/sendorder"===d.path})},"準備結賬",2),r,(0,a._)("li",{class:(0,l.C_)({progressActive:d.path==`/user/checkout/${e.orderId}`})}," 訂單完成 ",2)])])}var d={props:["orderId"],data(){return{path:"",isTrue:!1}},method:{},created(){this.path=this.$route.path,console.log(this.path)}},u=e(89);const p=(0,u.Z)(d,[["render",c]]);var h=p},3177:function(t,s,e){e.r(s),e.d(s,{default:function(){return B}});var a=e(3396),l=e(7139),o=e(9242);const n={class:"container"},i={class:"row mt-6"},r={class:"col-6"},c={class:"sticky-top"},d={class:"table align-middle"},u=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th"),(0,a._)("th",null,"品名"),(0,a._)("th",{class:"cart-input"},"數量"),(0,a._)("th",null,"單價")])],-1),p=["onClick"],h=(0,a._)("i",{class:"bi bi-x"},null,-1),_=[h],g=["src"],b={key:0,class:"text-success"},y={class:"input-group input-group-sm"},m=["onUpdate:modelValue","onChange","disabled"],v={class:"input-group-text"},k={class:"text-end"},w={key:0,class:"text-success"},x=(0,a._)("td",{colspan:"3",class:"text-end"},"總計",-1),f={class:"text-end"},C={key:0},$=(0,a._)("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),D={class:"text-end text-success"},L={class:"h-100 border-start border-4 col-6"},j={class:"table align-middle"},I=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"購物車總計"),(0,a._)("td"),(0,a._)("td")])],-1),q=(0,a._)("td",null,"小計",-1),z={key:0,class:"text-end"},T={key:1,class:"text-end"},U=(0,a._)("tr",null,[(0,a._)("td",null,"運費"),(0,a._)("td",{class:"text-end"},[(0,a._)("del",{class:"text-black-50"},"NT. 60")])],-1),A=(0,a._)("td",null,"總計",-1),N={key:0,class:"text-end"},S={key:1,class:"text-end"},Z={class:"mb-5"},M={class:"table align-middle"},O=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,[(0,a._)("i",{class:"bi bi-ticket-perforated-fill pe-2"}),(0,a.Uk)("折價券")])])],-1),P={class:"input-group input-group-sm mt-3 w-100",style:{height:"10vh"}},V={class:"input-group-append"};function H(t,s,e,h,H,W){const Y=(0,a.up)("Loading"),F=(0,a.up)("Progress");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(Y,{active:t.isLoading},null,8,["active"]),(0,a._)("div",n,[(0,a.Wm)(F),(0,a._)("div",i,[(0,a._)("div",r,[(0,a._)("div",c,[(0,a._)("table",d,[u,(0,a._)("tbody",null,[H.cart.carts?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(H.cart.carts,(s=>((0,a.wg)(),(0,a.iD)("tr",{key:s.id},[(0,a._)("td",null,[(0,a._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t=>W.removeCartItem(s.id)},_,8,p)]),(0,a._)("td",null,[(0,a._)("img",{src:s.product.imageUrl,alt:"item",class:"cart-img pe-1"},null,8,g),(0,a.Uk)(" "+(0,l.zw)(s.product.title)+" ",1),s.coupon?((0,a.wg)(),(0,a.iD)("div",b," 已套用優惠券 ")):(0,a.kq)("",!0)]),(0,a._)("td",null,[(0,a._)("div",y,[(0,a.wy)((0,a._)("input",{type:"number",class:"form-control","onUpdate:modelValue":t=>s.qty=t,min:"1",onChange:t=>W.updateCart(s),disabled:s.product_id===H.status.loadingItem},null,40,m),[[o.nr,s.qty,void 0,{number:!0}]]),(0,a._)("div",v," / "+(0,l.zw)(s.product.unit),1)])]),(0,a._)("td",k,[H.cart.final_total!==H.cart.total?((0,a.wg)(),(0,a.iD)("small",w,"折扣價：")):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,l.zw)(t.$filters.currency(s.final_total)),1)])])))),128)):(0,a.kq)("",!0)]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[x,(0,a._)("td",f,(0,l.zw)(t.$filters.currency(H.cart.total)),1)]),H.cart.final_total!==H.cart.total?((0,a.wg)(),(0,a.iD)("tr",C,[$,(0,a._)("td",D,(0,l.zw)(t.$filters.currency(H.cart.final_total)),1)])):(0,a.kq)("",!0)])]),(0,a._)("div",null,[(0,a._)("button",{class:"btn btn-outline-danger w-100 my-1",onClick:s[0]||(s[0]=(...t)=>W.delAll&&W.delAll(...t))}," 全部清除 "),(0,a._)("button",{class:"btn btn-outline-dark my-1 w-100",onClick:s[1]||(s[1]=(...t)=>W.back&&W.back(...t))}," 繼續購物 ")])])]),(0,a._)("div",L,[(0,a._)("table",j,[I,(0,a._)("tbody",null,[(0,a._)("tr",null,[q,(H.cart.total=H.cart.final_total)?((0,a.wg)(),(0,a.iD)("td",z," NT. "+(0,l.zw)(t.$filters.currency(H.cart.total)),1)):((0,a.wg)(),(0,a.iD)("td",T," NT. "+(0,l.zw)(t.$filters.currency(H.cart.final_total)),1))]),U,(0,a._)("tr",null,[A,(H.cart.total=H.cart.final_total)?((0,a.wg)(),(0,a.iD)("td",N," NT. "+(0,l.zw)(t.$filters.currency(H.cart.total)),1)):((0,a.wg)(),(0,a.iD)("td",S," NT. "+(0,l.zw)(t.$filters.currency(H.cart.final_total)),1))])])]),(0,a._)("div",Z,[(0,a.wy)((0,a._)("button",{class:"btn btn-outline-danger w-100",onClick:s[2]||(s[2]=(0,o.iM)(((...t)=>W.toSendOrder&&W.toSendOrder(...t)),["prevent"]))}," 前往結賬 ",512),[[o.F8,0!=H.cart.total]])]),(0,a._)("table",M,[O,(0,a._)("tr",null,[(0,a._)("td",null,[(0,a._)("div",P,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=t=>H.coupon_code=t),placeholder:"請輸入優惠碼",style:{height:"50px"}},null,512),[[o.nr,H.coupon_code]])])])]),(0,a._)("div",V,[(0,a._)("button",{class:"btn btn-outline-secondary w-100",type:"button",onClick:s[4]||(s[4]=(...t)=>W.addCouponCode&&W.addCouponCode(...t))}," 套用優惠碼 ")])])])])])],64)}e(560);var W=e(1390),Y={data(){return{products:[],product:{},status:{loadingItem:""},cart:{},coupon_code:""}},inject:["httpMessageState"],components:{Progress:W.Z},methods:{getProduct(t){this.$router.push(`/user/product/${t}`)},addCart(t){const s="https://vue3-course-api.hexschool.io/api/jaydan-api/cart";this.status.loadingItem=t;const e={product_id:t,qty:1};this.axios.post(s,{data:e}).then((t=>{this.status.loadingItem="",console.log(t),this.getCart()}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/jaydan-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{console.log(t),this.cart=t.data.data,this.isLoading=!1}))},updateCart(t){const s=`https://vue3-course-api.hexschool.io/api/jaydan-api/cart/${t.id}`;this.isLoading=!0;const e={product_id:t.product_id,qty:t.qty};this.status.loadingItem=t.id,this.axios.put(s,{data:e}).then((t=>{console.log(t),this.getCart(),this.status.loadingItem=""}))},addCouponCode(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/jaydan-api/coupon ",s={code:this.coupon_code};this.axios.post(t,{data:s}).then((t=>{this.isLoading=!1,console.log(t),this.getCart()}))},removeCartItem(t){this.isLoading=!0;const s=`https://vue3-course-api.hexschool.io/api/jaydan-api/cart/${t}`;this.axios.delete(s).then((t=>{console.log(t),this.isLoading=!1,this.getCart()}))},delAll(){const t="https://vue3-course-api.hexschool.io/api/jaydan-api/carts";this.isLoading=!0,this.axios.delete(t).then((t=>{this.isLoading=!1,this.httpMessageState(t,"購物車清除"),this.getCart()}))},back(){this.$router.push("/user/productlist"),scrollTo(0,0)},toSendOrder(){this.$router.push("/user/sendorder")}},created(){this.getCart()}},F=e(89);const K=(0,F.Z)(Y,[["render",H]]);var B=K}}]);
//# sourceMappingURL=177.2366e72c.js.map