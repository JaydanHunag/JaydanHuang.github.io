{"version":3,"file":"js/102.ca721222.js","mappings":"mQAGSA,MAAM,kB,UACTC,EAAAA,EAAAA,GAEK,MAFDD,MAAM,wDAAuD,UAEjE,K,GACIA,MAAM,gB,GAGLA,MAAM,O,GACJA,MAAM,oD,GACFA,MAAM,sB,UAGPC,EAAAA,EAAAA,GAA0B,MAAtBD,MAAM,QAAO,QAAI,K,UACrBC,EAAAA,EAAAA,GAAW,UAAP,MAAE,K,UACNA,EAAAA,EAAAA,GAAS,qB,GACLD,MAAM,Y,iCA2BHA,MAAM,iB,GAITA,MAAM,Y,+BAmBfA,MAAM,oB,0CAlEfE,EAAAA,EAAAA,IA4EO,cA3ELD,EAAAA,EAAAA,GA0EM,MA1ENE,EA0EM,CAzEJC,GAEK,SACLH,EAAAA,EAAAA,GAEK,KAFLI,EAAmD,gBAEnD,YAFgD,GAAfC,EAAAC,gBAGjCN,EAAAA,EAAAA,GAyDM,MAzDNO,EAyDM,EAxDJP,EAAAA,EAAAA,GAuDM,MAvDNQ,EAuDM,WAtDJR,EAAAA,EAAAA,GAqDQ,QArDRS,EAqDQ,EApDNT,EAAAA,EAAAA,GAWQ,eAVNA,EAAAA,EAAAA,GASK,WARHU,EACAC,EACAC,GACAZ,EAAAA,EAAAA,GAIK,KAJLa,EAIK,EAHHb,EAAAA,EAAAA,GAES,UAFDD,MAAM,sBAAuBe,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAC,WAAAD,EAAAC,aAAAF,KAAW,kBAEvD,aAINf,EAAAA,EAAAA,IAuCQkB,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAtCqBf,EAAAC,aAAW,CAA9Be,EAASC,M,WADnBrB,EAAAA,EAAAA,IAuCQ,SArCLsB,IAAKD,EACNvB,MAAM,S,EAENC,EAAAA,EAAAA,GAiCK,YAhCHA,EAAAA,EAAAA,GAQK,YAPHA,EAAAA,EAAAA,GAKE,OAJCwB,IAAKH,EAAQI,SACdC,IAAI,GACJC,MAAA,+BACA5B,MAAM,Q,mBACN,KACF6B,EAAAA,EAAAA,IAAGP,EAAQQ,OAAK,KAERR,EAAQS,OAAST,EAAQU,eAAY,WAA/C9B,EAAAA,EAAAA,IAEK,KAAA+B,EAF4C,QAC5CJ,EAAAA,EAAAA,IAAGK,EAAAC,SAASC,SAASd,EAAQU,eAAY,iBAE9C9B,EAAAA,EAAAA,IAAyD,KAAAmC,EAA9C,OAAGR,EAAAA,EAAAA,IAAGK,EAAAC,SAASC,SAASd,EAAQS,QAAK,KAChD9B,EAAAA,EAAAA,GAIK,YAHHA,EAAAA,EAAAA,GAEC,MAFDqC,EACG,OAAGT,EAAAA,EAAAA,IAAGK,EAAAC,SAASC,SAASd,EAAQU,eAAY,MAGjD/B,EAAAA,EAAAA,GAaK,KAbLsC,EAaK,EAZHtC,EAAAA,EAAAA,GAKS,UAJNc,QAAKyB,GAAEtB,EAAAuB,oBAAoBnB,GAC5BtB,MAAM,sCACP,OAED,EAAA0C,IACAzC,EAAAA,EAAAA,GAKS,UAJPD,MAAM,sCACLe,SAAK4B,EAAAA,EAAAA,KAAAH,GAAUtB,EAAA0B,QAAQtB,EAAQuB,KAAE,cACnC,UAED,EAAAC,Y,mBAjDiD,GAAfxC,EAAAC,oBAwD9CN,EAAAA,EAAAA,GAQM,MARN8C,EAQM,EAPJ9C,EAAAA,EAAAA,GAES,UAFDD,MAAM,wCAAyCe,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAA8B,UAAA9B,EAAA8B,YAAA/B,KAAU,WAIxEhB,EAAAA,EAAAA,GAES,UAFDD,MAAM,wCAAyCe,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAA+B,QAAA/B,EAAA+B,UAAAhC,KAAQ,e,YAc9E,GACEiC,IAAAA,GACE,MAAO,CACLC,cAAe,GACfC,SAAU,GACV7C,YAAa,GAEjB,EAEA8C,QAAS,CACPZ,mBAAAA,CAAoBnB,GAElBgC,KAAK/C,YAAc+C,KAAK/C,YAAYgD,QACjCC,GAAQA,EAAIX,KAAOvB,EAAQuB,KAG9BY,aAAaC,QAAQ,YACvB,EACAV,QAAAA,GACEM,KAAKK,QAAQC,KAAK,IACpB,EACAX,MAAAA,GACEK,KAAKK,QAAQE,IAAI,EACnB,EACAC,UAAAA,GACE,MAAMC,EAAO,mEAEbT,KAAKU,MAAMC,IAAIF,GAAKG,MAAMC,IACxBC,QAAQC,IAAIF,EAAIjB,KAAKE,UACrBE,KAAKF,SAAWe,EAAIjB,KAAKE,SACzBgB,QAAQC,IAAIf,KAAKF,UACjB,IAAIkB,EAAYC,KAAKC,MAAMf,aAAaC,QAAQ,cAC5Ce,EAAOH,EACXF,QAAQC,WAAWC,GACfA,EACFhB,KAAKH,cAAcS,KACjBN,KAAKF,SAASG,QAAQjC,GACbmD,EAAKC,SAASpD,EAAQuB,OAIjCS,KAAK/C,YAAc,GAGrB,MAAMoE,EAAcrB,KAAKH,cACzBG,KAAK/C,YAAcoE,EAAYC,MAAM,GAEzC,EACAhC,OAAAA,CAAQC,GACN,MAAMgC,EAAO,2DACPC,EAAO,CACXC,WAAYlC,EACZmC,IAAK,GAEP1B,KAAKU,MAAMiB,KAAKJ,EAAK,CAAE3B,KAAM4B,IAAQZ,MAAMC,IACzCC,QAAQC,IAAIF,EAAI,GAEpB,EACAhD,SAAAA,GACEiD,QAAQC,IAAI,eACZZ,aAAayB,QACb5B,KAAK/C,YAAc,EACrB,GAEF4E,OAAAA,GACE7B,KAAKQ,YACP,G,QClJF,MAAMsB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://vue-project/./src/views/Favorite.vue","webpack://vue-project/./src/views/Favorite.vue?b54f"],"sourcesContent":["<!-- FavoriteItems.vue -->\r\n<template>\r\n  <body>\r\n    <div class=\"mt-6 container\">\r\n      <h1 class=\"text-center py-5 border-5 border-bottom w-75 mx-auto\">\r\n        我的收藏\r\n      </h1>\r\n      <h3 class=\"mt-6 favo-h4\" v-show=\"showProduct == 0\">\r\n        您的收藏清單是空的 !\r\n      </h3>\r\n      <div class=\"row\">\r\n        <div class=\"d-flex justify-content-center col-8 mx-auto mt-6\">\r\n          <table class=\"table align-middle\" v-show=\"showProduct != 0\">\r\n            <thead>\r\n              <tr>\r\n                <th class=\"mb-2\">商品資訊</th>\r\n                <th>價格</th>\r\n                <td></td>\r\n                <td class=\"text-end\">\r\n                  <button class=\"btn btn-danger mx-2\" @click=\"removeAll\">\r\n                    清空所有\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </thead>\r\n            <tbody\r\n              v-for=\"(product, index) in showProduct\"\r\n              :key=\"index\"\r\n              class=\"w-100\"\r\n            >\r\n              <tr>\r\n                <td>\r\n                  <img\r\n                    :src=\"product.imageUrl\"\r\n                    alt=\"\"\r\n                    style=\"width: 100px; height: 100px\"\r\n                    class=\"pe-2\"\r\n                  />\r\n                  {{ product.title }}\r\n                </td>\r\n                <td v-if=\"product.price == product.origin_price\">\r\n                  NT.{{ $filters.currency(product.origin_price) }}\r\n                </td>\r\n                <td v-else>NT.{{ $filters.currency(product.price) }}</td>\r\n                <td>\r\n                  <del class=\"text-black-50\"\r\n                    >NT.{{ $filters.currency(product.origin_price) }}</del\r\n                  >\r\n                </td>\r\n                <td class=\"text-end\">\r\n                  <button\r\n                    @click=\"removeFromFavorites(product)\"\r\n                    class=\"btn btn-outline-danger btn-lg mx-2\"\r\n                  >\r\n                    刪除\r\n                  </button>\r\n                  <button\r\n                    class=\"btn btn-outline-success btn-lg mx-2\"\r\n                    @click.prevent=\"addCart(product.id)\"\r\n                  >\r\n                    加入購物車\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n      <div class=\"mt-3 text-center\">\r\n        <button class=\"btn btn-outline-secondary btn-lg mx-2\" @click=\"backHome\">\r\n          返回首頁\r\n        </button>\r\n\r\n        <button class=\"btn btn-outline-secondary btn-lg mx-2\" @click=\"goShop\">\r\n          繼續購物\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </body>\r\n</template>\r\n\r\n<style scoped>\r\nbody {\r\n  height: 100svh;\r\n}\r\n</style>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      favoriteItems: [],\r\n      products: [],\r\n      showProduct: [],\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    removeFromFavorites(product) {\r\n      // 从最爱列表中移除\r\n      this.showProduct = this.showProduct.filter(\r\n        (fav) => fav.id !== product.id\r\n      );\r\n      // 更新 localStorage\r\n      localStorage.getItem(\"favorites\");\r\n    },\r\n    backHome() {\r\n      this.$router.push(\"/\");\r\n    },\r\n    goShop() {\r\n      this.$router.go(-1);\r\n    },\r\n    getProduct() {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\r\n\r\n      this.axios.get(api).then((res) => {\r\n        console.log(res.data.products);\r\n        this.products = res.data.products;\r\n        console.log(this.products);\r\n        let favorites = JSON.parse(localStorage.getItem(\"favorites\"));\r\n        let favo = favorites;\r\n        console.log(typeof favorites);\r\n        if (favorites) {\r\n          this.favoriteItems.push(\r\n            this.products.filter((product) => {\r\n              return favo.includes(product.id);\r\n            })\r\n          );\r\n        } else {\r\n          this.showProduct = [];\r\n        }\r\n\r\n        const flatProduct = this.favoriteItems;\r\n        this.showProduct = flatProduct.flat();\r\n      });\r\n    },\r\n    addCart(id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1,\r\n      };\r\n      this.axios.post(url, { data: cart }).then((res) => {\r\n        console.log(res);\r\n      });\r\n    },\r\n    removeAll() {\r\n      console.log(\"removeAll啟動\");\r\n      localStorage.clear();\r\n      this.showProduct = [];\r\n    },\r\n  },\r\n  created() {\r\n    this.getProduct();\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./Favorite.vue?vue&type=template&id=194ff9fe&scoped=true\"\nimport script from \"./Favorite.vue?vue&type=script&lang=js\"\nexport * from \"./Favorite.vue?vue&type=script&lang=js\"\n\nimport \"./Favorite.vue?vue&type=style&index=0&id=194ff9fe&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-194ff9fe\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","$data","showProduct","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","onClick","_cache","args","$options","removeAll","_Fragment","_renderList","product","index","key","src","imageUrl","alt","style","_toDisplayString","title","price","origin_price","_hoisted_12","_ctx","$filters","currency","_hoisted_13","_hoisted_14","_hoisted_15","$event","removeFromFavorites","_hoisted_16","_withModifiers","addCart","id","_hoisted_17","_hoisted_18","backHome","goShop","data","favoriteItems","products","methods","this","filter","fav","localStorage","getItem","$router","push","go","getProduct","api","axios","get","then","res","console","log","favorites","JSON","parse","favo","includes","flatProduct","flat","url","cart","product_id","qty","post","clear","created","__exports__","render"],"sourceRoot":""}